<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>猫抓 M3U8解析</title>
    <link rel="stylesheet" type="text/css" href="css/options.css" media="all" />
    <script src="js/jquery.min.js"></script>
    <script src="js/init.js"></script>
  </head>

  <body>
    <div class="m3u8_wrapper">

      <section id="downfile" class="hide">
        <h1 class="optionsTitle">常规下载失败，开始辅助下载</h1>
        <div class="optionBox">
          <div id="downFilepProgress"></div>
          <div class="progress-bar">
            <div class="progress"></div>
          </div>
        </div>
      </section>

      <section id="loading">
        <div class="optionBox">
          文件载入中...
        </div>
      </section>

      <section id="more_m3u8" class="hide">
        <h1 class="optionsTitle">下一级文件</h1>
        <span class="explain">该m3u8文件中嵌套多个m3u8文件</span>
        <div class="optionBox">
          <div id="next_m3u8"></div>
        </div>
      </section>

      <section id="m3u8" class="hide">
        <h1 class="optionsTitle">m3u8解析</h1>
        <span class="explain" id="key"></span>
        <div class="optionBox">
          <div class="block">
            m3u8文件地址
            <p><a id="m3u8_url"></a></p>
          </div>
          
          <div class="block hide" id="tips">
            该媒体已加密, 请注意加密信息 <br>
          </div>

          <div class="block">
            <p id="count"></p>
          </div>
          
          <div class="block">
            <textarea rows="50" cols="160" id="media_file" spellcheck="false"></textarea>
          </div>

          <div class="block" id="button">
            <button id="DownText">下载显示的内容</button>
            <button id="UrlDecode">UrlDecode解码</button>
            <input type="text" value='wget "$url$"' id="formatStr" spellcheck="false" />
            <button id="format">自定义格式化</button>
            <button id="DownFixm3u8">格式化成本地m3u8</button>
            <button id="Refresh">还原</button>
            <br>
            下载线程数 <input type="number" value='10' id="thread" spellcheck="false" style="width: 35px;"/>
            <button id="AllDownload">尝试下载并合并ts</button> 
            <button id="ForceDownload" class="hide">强制下载已有数据</button> 
            <div id="progress"></div>

            <div class="block hide" id="errorTsList"></div>

            <div class="ffmpeg">ffmpeg合并ts命令: <p>ffmpeg -i xxx.m3u8 -vcodec copy -acodec copy xxx.mp4</p></div>
          </div>

        </div>
      </div>
      </section>
      <video id="video" class="hide"></video>
    </div>
    <script src="js/m3u8-decrypt.js"></script>
    <script src="js/m3u8.js"></script>
  </body>
</html>
